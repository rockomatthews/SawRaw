# Continuity Studio MVP (Next.js + MUI)

Minimal Next.js + Material UI app for generating Sora 2 clips, exporting prompt
packs, and running look-system batch variants.

## Setup
1. Copy `.env.example` to `.env` and set `OPENAI_API_KEY`.
2. Install dependencies: `npm install`
3. Run: `npm run dev`
4. Open `http://localhost:3000`

## Supabase schema
Create two tables:

```sql
create table if not exists subscriptions (
  user_id uuid primary key,
  status text,
  current_period_end timestamptz,
  stripe_customer_id text,
  updated_at timestamptz default now()
);

create table if not exists videos (
  id bigint generated by default as identity primary key,
  user_id uuid,
  video_id text unique,
  prompt text,
  model text,
  seconds text,
  size text,
  status text,
  created_at timestamptz default now()
);
```

## Stripe setup
- Create a recurring price in Stripe and set `STRIPE_PRICE_ID`.
- Add webhook endpoint at `/api/stripe/webhook` and set `STRIPE_WEBHOOK_SECRET`.

## Features
- Single clip generation with optional reference image upload
- Reference image preview with automatic resize to selected size
- Look system template builder (fields to prompt)
- Prompt pack JSON exporter for look systems
- Batch variant runner with per-variant status + retry controls
- Supabase auth + subscription gating
- Watermarked downloads for free tier

## Notes
- `size` and `seconds` are enforced server-side for consistency.
- Optional reference can be a URL or an uploaded image file.
- Sora API does not expose watermarking directly; watermarking is added during download.
